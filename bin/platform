#!/usr/bin/bash

# Wrappers 

P="\e["
S="m"
END="${P}0${S}"

# Cyan

C="34"
CYAN="${P}${C}${S}"
BOLDCYAN="${P}1;${C}${S}"
ITALICYELLOW="${P}3;${C}${S}"

# Blue

B="36"
BLUE="${P}${B}${S}"
BOLDBLUE="${P}1;${B}${S}"
ITALICYELLOW="${P}3;${B}${S}"

# Light Cyan

LC="94"
LIGHTCYAN="${P}${LC}${S}"
BOLDLIGHTCYAN="${P}1;${LC}${S}"
ITALICLIGHTCYAN="${P}3;${LC}${S}"

# Light Blue

LB="94"
LIGHTBLUE="${P}${LB}${S}"
BOLDLIGHTBLUE="${P}1;${LB}${S}"
ITALICLIGHTBLUE="${P}3;${LB}${S}"

# Green

G="32"
LIGHTBLUE="${P}${G}${S}"
BOLDLIGHTBLUE="${P}1;${G}${S}"
ITALICLIGHTBLUE="${P}3;${G}${S}"

h1 () {
  echo -e "${BOLDBLUE}${1}${END}"
}

h2 () {
  echo -e "${BLUE}${1}${END}"
}

h3 () {
  echo -e "${CYAN}${1}${END}"
}

success () {
  echo -e "âœ… ${GREEN}${1}${END}"
}

PLATFORM="unknown"
if [[ "$(uname -v)" == *"Ubuntu"* ]]; then
   PLATFORM='ubuntu'
fi

install_package () {
  if [[ "$(uname -v)" == *"Ubuntu"* ]]; then
    sudo apt-get -qq -o "DPkg::Lock::Timeout=180" install $1
  fi
}

remove_package () {
  if [[ "$(uname -v)" == *"Ubuntu"* ]]; then
    sudo apt-get -qq -o "DPkg::Lock::Timeout=180" remove $1
  fi
}

update_packages () {
  if [[ "$(uname -v)" == *"Ubuntu"* ]]; then
    sudo apt-get -qq -o "DPkg::Lock::Timeout=180" update > /dev/null
  fi
}

upgrade_packages () {
  if [[ "$(uname -v)" == *"Ubuntu"* ]]; then
    sudo -E apt-get -qq -o "Dpkg::Options::=--force-confdef" -o "Dpkg::Options::=--force-confold" -o "DPkg::Lock::Timeout=180" upgrade > /dev/null
  fi
}

parse_config_item () {
  echo $2 | python3 -c "import sys, json; print(json.load(sys.stdin)[0]${1})"
}

parse_config_item_custom_field () {
  echo $2 | python3 -c "import sys, json; print(next(cf for cf in json.load(sys.stdin)[0]['fields'] if cf['name'] == '${1}')['value'])"
}

